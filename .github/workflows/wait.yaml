
name: Wait
on:
  workflow_dispatch:
    inputs:
      environment:
        description: "wait"
        type: environment
        required: true
jobs:
  Part1:
    name: Date
    if: inputs.environment == 'prod'
    # environment: 
    #   name: prod
    #   url: ${{ steps.deploy.outputs.url }}
    runs-on: ubuntu-latest

    steps:
      - name: Date
        run: date -u

  Part2:
    needs: Part1
    name: Approve
    if: inputs.environment == 'prod'
    environment: 
      name: prod
      url: ${{ steps.deploy.outputs.url }}
    runs-on: ubuntu-latest

    steps:
      - name: Date
        run: date -u
        
      # - name: Wait for approval
      #   uses: actions/github-script@v7
      #   with:
      #     github-token: ${{ secrets.GITHUB_TOKEN }}
      #     script: |
      #       github.rest.repos.createDeployment({
      #         owner: context.repo.owner,
      #         repo: context.repo.repo,
      #         required_contexts: [],
      #         environment: 'prod',
      #       })
      
      - name: Deploy
        id: deploy
        run: echo "Deploying to production"

      - name: Date
        run: date -u
